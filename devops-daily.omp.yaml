$schema: >-
  https://raw.githubusercontent.com/JanDeDobbeleer/oh-my-posh/main/themes/schema.json
version: 3
console_title_template: "{{ .Folder }}"
palette:
  background-color: transparent
  white-text: "#ffffff"
  first-row-icon: "#58A0C8"
  wording: "#FFDE63"
  third-left-prompt: "#58A0C8"
  cloud-text-aws: "#ff9800"
  cloud-text-azure: "#3391f0"
  cloud-text-gcp: "#679b00"
  user: "#d19a66"
  python-text: "#93DA97"
  git-text: "#58A0C8"
  kubernetes-text: "#93DA97"
  error-text: "#eb4034"

tooltips:
  - type: kubectl
    tips:
      - kubectl
      - kubectx
      - kube
      - k
      - helm
      - k9s
    style: plain
    foreground: "p:kubernetes-text"
    properties:
      parse_kubeconfig: true
    template: "󰠳 {{.Context}}"
  - type: aws
    tips:
      - aws
      - terraform
      - tofu
    style: plain
    foreground: "p:cloud-text-aws"
    template: "<b>󰸏</b> {{ .Profile }}{{ if .Region }}@{{ .Region }}{{ end }}"
  - type: az
    style: plain
    tips:
      - az
      - terraform
      - tofu
    foreground: "p:cloud-text-azure"
    template: "{{if .TenantDisplayName}} {{ .Name }}{{ end }}"
    properties:
      source: first_match
  - type: gcp
    tips:
      - gcloud
      - terraform
      - tofu
    style: plain
    foreground: "p:cloud-text-gcp"
    template: "{{ if .Error }}{{ .Error }}{{ else }} {{ .Project }}{{ end }} "

blocks:
  - alignment: left
    newline: true
    type: prompt
    segments:
      - type: session
        style: diamond
        foreground: "p:user-text"
        leading_diamond: "<p:first-row-icon>󰇥 </>"
        properties:
          display_host: true
        template: >-
          {{ if .SSHSession }}  {{ if .Root }} <p:white-text>isRoot{{ end }}{{ end }}{{ .UserName }}{{ if .SSHSession }}@{{.HostName}}{{ end }} <p:white-text>@</>
      - type: git
        alias: gitSeg
        foreground: "p:git-text"
        properties:
          fetch_stash_count: true
          fetch_status: true
          fetch_upstream_icon: true
          fetch_worktree_count: true
        style: diamond
        template: " {{ .UpstreamIcon }} {{ .RepoName }} {{ .HEAD }}{{ if .BranchStatus }} {{ .BranchStatus }}{{ end }}{{ if .Working.Changed }}  {{ .Working.String }}{{ end }}{{ if and (.Working.Changed) (.Staging.Changed) }}|{{ end }}{{ if .Staging.Changed }}  {{ .Staging.String }}{{ end }}{{ if gt .StashCount 0 }}  {{ .StashCount }}{{ end }} "
      - type: text
        style: plain
        template: '{{ if .Segments.Contains "gitSeg" }}{{else}}  {{.Folder}} {{ end }}</>'
      - type: python
        foreground: "p:python-text"
        style: diamond
        properties:
          fetch_virtual_env: true
          display_mode: environment
          home_enabled: true
        template: "|  {{ if .Error }}{{ .Error }}{{ else }}{{ if .Venv }}{{ .Venv }}{{ end }}{{ end }}"
  - alignment: right
    type: prompt
    segments:
      - type: status
        style: plain
        template: "{{ if eq .Code 0 }}<p:first-row-icon>\uf00c{{ else }}<p:error-text>\uf071{{ end }}"
        properties:
          always_enabled: true
      - foreground: "p:wording"
        properties:
          style: dallas
          threshold: 0
        style: plain
        template: " {{ .FormattedMs }}s <p:white-text>|</>"
        type: executiontime
      - foreground: "p:wording"
        properties:
          time_format: "_2 Jan 2006(Mon)<p:white-text>,</>15:04"
        style: diamond
        template: "{{ .CurrentDate | date .Format }} "
        type: time
  - alignment: left
    newline: true
    type: prompt
    segments:
      - foreground: "p:wording"
        properties:
          style: agnoster_short
          home_icon: home
          max_depth: 2
          folder_icon: ...
          folder_separator_icon: "/"
        style: plain
        template: " {{ .Path }} "
        type: path
  - alignment: left
    newline: true
    segments:
      - foreground: "p:third-left-prompt"
        style: plain
        template: " "
        type: text
    type: prompt
